@{
    ViewData["Title"] = "NUUS Home";
}

<h1>Welcome to NUUS Home</h1>

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap modal dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        $(document).ready(function () {
            // Check if TempData passed from controller is true
            var forceChangePassword = '@TempData["ForceChangePassword"]';

            if (forceChangePassword === 'true') {
                // Show modal on page load
                $('#forceChangePasswordModal').modal({
                    backdrop: 'static',
                    keyboard: false
                });

                $('#forceChangePasswordModal').modal('show');

                // Redirect when clicking proceed button
                $('#btnProceedChangePassword').click(function () {
                    window.location.href = '@Url.Action("Profile", "Account", new { area = "NUUS" })';
                });
            }
        });
    </script>
}

<!-- Modal HTML -->
<div class="modal fade" id="forceChangePasswordModal" tabindex="-1" role="dialog" aria-labelledby="forceChangePasswordModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="forceChangePasswordModalLabel">Password Change Required</h5>
            </div>
            <div class="modal-body">
                <p>For security reasons, you must change your password before continuing.</p>
            </div>
            <div class="modal-footer">
                <button type="button" id="btnProceedChangePassword" class="btn btn-primary">Proceed to Change Password</button>
            </div>
        </div>
    </div>
</div>
